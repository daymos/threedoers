extends base

block title
  |  Your Profile


block extra-headers
  meta(name="csrf-token", content="#{csrfToken}")

block body
  .container
    .row
      .col-md-6
        h1.page-title
          span Edit Your
        h1.page-title
          span Profile
  br
  .section.primary
    .container
      .row
        .col-md-6.col-sm-7
          p#result
          form#registration(action='/profile/settings', method='POST', role='form', accept-charset='utf-8')
            input(type='hidden', name='authenticity_token')
            input(type='hidden', name='_csrf', value=csrfToken)
            .photoedit
              - if (user.photo)
                img#profile_image(width='142', height='142', src='/#{ user.photo }', alt='#{ user.firstName } #{ user.lastName }')
              - else
                img#profile_image(width='142', height='142', src='/img/edit_photo_placeholder.png?1396277523', alt='profile image')
              a#clickable(href='#') EDIT PHOTO
            .form-group
              input#username.form-control.input-text.input-lg(value=(user.username)?"#{user.username}":"", placeholder='USERNAME', name='username')
            .form-group
              input#email.form-control.input-text.input-lg(value=(user.email)?"#{user.email}":"", placeholder='EMAIL', name='email')
            .form-group
              input#firstName.form-control.input-text.input-lg(value=(user.firstName)?"#{user.firstName}":"", placeholder='FIRST NAME', name='firstName')
            .form-group
              input#lastName.form-control.input-text.input-lg(value=(user.lastName)?"#{user.lastName}":"", placeholder='LAST NAME', name='lastName')
            .form-group
              input#address.form-control.input-text.input-lg(value=(user.address)?"#{user.address}":"", placeholder='ADDRESS', name='address')
            .form-group
              input#city(type='hidden', name='city')
              input#country(type='hidden', name='country')
              input#location(type='hidden', name='location')

            br
            br
            br

            .form-group
              button#submit.btn.btn-default.btn-lg.btn-medium(type='submit')
                span UPDATE

      br
      br

      if user.printer == 'accepted'
        h1 Printer Direction
        dl
          if user.printerAddress
            - for (key in user.printerAddress)
              dt #{ key }
              dd #{ user.printerAddress[key] }

        a#link.direct-link(href='/profile/settings/printer-direction') Update

      if user.shippingAddresses
        h1 Shipping Directions
        for direction in user.shippingAddresses
          #{direction}
        else
          strong you still don't have any direction
          br

        a#link.direct-link(href='') Add new direction


    .right-hand.top.hidden-xs
      img(src='/img/hand_register.png', alt='3doers Hand')

  br
  br
  br
  br

  include ../../includes/publicity

block scripts
  script(src='/vendor/jquery.ajaxupload.js')
  script(src='/js/views/settings.js')
  script(src='https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places')
  script.
    var address = "#{user.address}"
