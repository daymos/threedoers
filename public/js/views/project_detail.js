(function(){var e,t;t=function(e){var t,n,r;r=[];for(n in e)t=$("#"+n),1===t.length&&t.text(e[n]),"status"===n?"processing"===e[n]?($(".object-volume").addClass("hide"),r.push($(".processing-volume").removeClass("hide"))):($(".object-volume").removeClass("hide"),r.push($(".processing-volume").addClass("hide"))):r.push(void 0);return r},e={black:"#000000",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",yellow:"#FFFF00"},$(document).ready(function(){var n,r,a,o;return n="X-CSRF-Token",r=function(e){return jQuery.ajaxPrefilter(function(t,r,a){return a.crossDomain?void 0:a.setRequestHeader(n,e)})},r($('meta[name="csrf-token"]').attr("content")),a=io.connect(":"+port+"/project?project="+project.id),a.on("error",function(e){return console.log(e.msg)}),a.on("update",function(e){return a.emit("order-price",{ammount:$("#ammount").val()}),t(e)}),a.on("update-price-order",function(e){return $("#order-price").text(e.price)}),$(".selectpicker").selectpicker(),Modernizr.canvas||$("#message-canvas").removeClass("hide"),o=new JSC3D.Viewer($("#cv").get(0)),o.setParameter("SceneUrl","/"+project.filename),o.setParameter("ModelColor",""+e[project.color]),o.setParameter("BackgroundColor1","#E5D7BA"),o.setParameter("BackgroundColor2","#383840"),o.setParameter("RenderMode","smooth"),o.init(),o.update(),$("#color-chooser").val(""+project.color).change(function(){return $.post("/project/color/"+project.id,{value:$(this).val()}),o.setParameter("ModelColor",""+e[project.color]),o.update(!1)}),$("#density-chooser").val(""+project.density).change(function(){return $.post("/project/density/"+project.id,{value:$(this).val()})}),$("#title").editable({type:"text",pk:""+project.id,url:"/project/title"}),$("#ammount").keyup(function(){return $("#order-price").text("Processing"),a.emit("order-price",{ammount:$("#ammount").val()})})})}).call(this);