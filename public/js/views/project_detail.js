(function(){var e,t,n,r,i;i=function(e){var t,n,r;r=[];for(n in e)t=$("#"+n),1===t.length&&t.text(" "+e[n]),"status"===n&&("processing"===e[n]?($(".object-volume").addClass("hide"),$(".processing-volume").removeClass("hide")):($(".object-volume").removeClass("hide"),$(".processing-volume").addClass("hide"))),"order"===n?r.push($("#order-placed-order").text(" "+e[n].price)):r.push(void 0);return r},e={black:"#000000",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",yellow:"#FFFF00"},t=function(e){return r[e]||e},n=function(e){return e.replace(/[&<>]/g,t)},r={"&":"&amp;","<":"&lt;",">":"&gt;"},$(document).ready(function(){var t,r,a,o;return t="X-CSRF-Token",r=function(e){return jQuery.ajaxPrefilter(function(n,r,i){return i.crossDomain?void 0:i.setRequestHeader(t,e)})},r($('meta[name="csrf-token"]').attr("content")),a=io.connect(":"+port+"/project?project="+project.id),a.on("error",function(e){return console.log(e.msg)}),a.on("update",function(e){return a.emit("order-price",{ammount:$("#ammount").val()}),i(e)}),a.on("update-price-order",function(e){return $("#order-price").text(e.price)}),Modernizr.canvas||$("#message-canvas").removeClass("hide"),o=new JSC3D.Viewer($("#cv").get(0)),o.setParameter("SceneUrl","/"+project.filename),o.setParameter("ModelColor",""+e[project.color]),o.setParameter("BackgroundColor1","#E5D7BA"),o.setParameter("InitRotationX","25"),o.setParameter("InitRotationY","25"),o.setParameter("InitRotationZ","25"),o.setParameter("BackgroundColor2","#383840"),o.setParameter("RenderMode","smooth"),o.setParameter("Definition","high"),o.setParameter("MipMapping","on"),o.setParameter("CreaseAngle","30"),o.init(),o.update(),$("#color-chooser").val(""+project.color),$("#color-chooser").val(""+project.color).change(function(){return $.post("/project/color/"+project.id,{value:$(this).val()},function(){return location.reload()})}),$("#density-chooser").val(""+project.density),$("#density-chooser").val(""+project.density).change(function(){return $.post("/project/density/"+project.id,{value:$(this).val()})}),$("#title").editable("/project/title/"+project.id),$("#ammount").keyup(function(e){return(/\D/g.test(this.value)||/^0$/.test(this.value))&&(this.value=this.value.replace(/\D/g,""),this.value=this.value.replace(/^0$/,"")),/^[1-9][0-9]*$/.test(this.value)||/^\s*$/.test(this.value)?($("#order-price").text("Processing"),a.emit("order-price",{ammount:$("#ammount").val()})):e.preventDefault()}),$("#comment-button").click(function(e){return e.preventDefault(),$.ajax({url:"/project/comment/"+project.id,method:"post",dataType:"json",data:{message:$("#comment-text").val()},success:function(e){var t;return t="<div class='media'><a href='#' class='pull-left'><img src='/"+e.photo+"' alt='' class='media-object' height='78' width='78'></a>              <div class='media-body'>                <p>"+n(e.content)+"</p>              </div>              <div class='media-meta'>by <span class='author'>"+e.username+"</span> <span class='date'>"+Date(e.createdAt)+"</span></div>            </div>",$("#comment-list").append($(t)),$("#comment-text").val("")},statusCode:{400:function(e){return e=JSON.parse(e.responseText),alert(e.msg)}}})})})}).call(this);